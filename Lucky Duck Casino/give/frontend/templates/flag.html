<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выигрыш - Lucky Duck Blackjack</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/styles_index.css" />
    <link rel="stylesheet" href="/static/css/styles_auth.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap');
    </style>
</head>
<body class="flex flex-col min-h-screen bg-gray-900 text-white">
    <!-- Animated Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-10 left-1/4 w-16 h-16 rounded-full bg-yellow-500 opacity-20 blur-xl"></div>
        <div class="absolute top-1/3 right-1/5 w-24 h-24 rounded-full bg-red-500 opacity-20 blur-xl"></div>
        <div class="absolute bottom-1/4 left-1/5 w-20 h-20 rounded-full bg-green-500 opacity-20 blur-xl"></div>
        <div class="absolute bottom-10 right-1/4 w-12 h-12 rounded-full bg-blue-500 opacity-20 blur-xl"></div>
    </div>

    <!-- Header -->
    <header class="relative z-10 py-6 px-4 sm:px-6 lg:px-8">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-dice text-3xl text-yellow-400"></i>
                <h1 class="text-2xl sm:text-3xl font-bold text-white">Lucky Duck Casino</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex items-center justify-center relative z-10 px-4">
        <div class="container mx-auto max-w-6xl text-center">
            <h2 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6 title-font neon-text">
                Выигрыш!
            </h2>
            <div id="result-message" class="mb-6"></div>
            <div id="flag" class="hidden mx-auto mb-6 text-6xl font-bold text-yellow-400 shadow-lg transition-transform transform scale-100"></div>
            <p id="no-win-message" class="text-lg sm:text-xl text-gray-300 mb-8 hidden">
                Вы еще ничего не выиграли, возвращайтесь позже.
            </p>
            <button id="redirect-button" class="px-8 py-4 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white font-bold rounded-full text-lg transition-all duration-300 transform hover:scale-105 hidden">
                Вернуться в игру
            </button>
        </div>
    </main>

    <!-- Footer -->
    <footer class="relative z-10 py-6 px-4 sm:px-6 lg:px-8 bg-opacity-20 mt-12">
        <div class="container mx-auto">
            <div class="flex flex-col items-center">
                <div class="flex items-center space-x-2 mb-2">
                    <i class="fas fa-dice text-xl text-yellow-400"></i>
                    <span class="text-white">Lucky Duck Casino</span>
                </div>
                <div class="text-gray-400 text-sm text-center">
                    <p>© 2025 Lucky Duck Casino. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>
    <script src="/static/js/api_lose_flag.js"></script>
    <script>
        async function checkWin() {
            const result = await get_flag();
            const flag = document.getElementById('flag');
            const noWinMessage = document.getElementById('no-win-message');
            const redirectButton = document.getElementById('redirect-button');
            const resultMessage = document.getElementById('result-message');

            if (result.statusCode === 200) {
                console.log(result.data.msg);
                flag.textContent = result.data.msg; // Предполагается, что
                flag.classList.remove('hidden');
                resultMessage.textContent = "Поздравляем! Вы выиграли!";
            } else if (result.statusCode === 403) {
                window.location.href = '/';
                document.cookie = 'session=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/'
            } else {
                noWinMessage.classList.remove('hidden'); // Показываем сообщение о том, что ничего не выиграно
                redirectButton.classList.remove('hidden'); // Показываем кнопку для редиректа
            }
        }

        // Вызываем функцию проверки выигрыша при загрузке страницы
        window.onload = checkWin;
        document.getElementById('redirect-button').addEventListener('click', async () => {
            window.location.href = '/blackjack';
        });
     </script>